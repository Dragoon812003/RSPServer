<!DOCTYPE html>
<html>

<style>

*{
    overflow: hidden;
    margin-left: 10px;
}

.container{
    width: 100vw;
}

.buttons-container{
    display: flex;
    flex-direction: column;
    align-items: center;
}

.nav-button{
    display: flex;
    align-items: center;
    justify-content: center;
}

.row1 {
    width: 250px;
    display: flex;
    justify-content: center;
    margin-top: 10px;
}
    
.row2{
    width: 250px;
    display: flex;
    justify-content: space-between;
    margin-top: 10px;
}

.row3{
    width: 250px;
    display: flex;
    justify-content: center;
    margin-top: 10px;
}

.forward-arrow{
    transform: rotateZ(-90deg);
}

.backward-arrow{
    transform: rotateZ(90deg);
}

.left-arrow{
    transform: rotateZ(180deg);
}

.right-arrow{
    transform: rotateZ(0deg);
}

</style>

<body>
    <div class="container">
        <h3 class="mt-5">Land Mine Detector</h3>
        <div class="video-container">
            <img src="{{ url_for('video_feed') }}" height="30%" style="border: 2px solid black">
            <!-- <img src="{{ url_for('static', filename='img/arrow.png') }}" height="30%" style="border: 2px solid black"> -->
        </div>
        <div class="buttons-container">
            <div class="row1">
                <form id="go-forward-form" method="POST" action="{{ url_for('move') }}">
                    <button type="submit" id="btn-forward" class="nav-button"><img class="forward-arrow" width="25px" src="{{ url_for('static', filename='img/arrow.png') }}"></button>
                </form>
            </div>
            <div class="row2">
                <form id="go-left-form" method="POST" action="{{ url_for('move') }}">
                    <button type="submit" id="btn-left" class="nav-button"><img class="left-arrow" width="25px" src="{{ url_for('static', filename='img/arrow.png') }}"></button>
                </form>
                <form id="go-right-form" method="POST" action="{{ url_for('move') }}">
                    <button type="submit" id="btn-right" class="nav-button"><img class="right-arrow" width="25px" src="{{ url_for('static', filename='img/arrow.png') }}"></button>
                </form>
            </div>
            <div class="row3">
                <form id="go-backward-form" method="POST" action="{{ url_for('move') }}">
                    <button type="submit" id="btn-backward" class="nav-button"><img class="backward-arrow" width="25px" src="{{ url_for('static', filename='img/arrow.png') }}"></button>
                </form>
            </div>
        </div>
    </div>  

    <script src="{{ url_for('static', filename='jquery.js') }}"></script>
    <script src="{{ url_for('static', filename='ajax.js') }}"></script>
    <script>
        forwardBtn = document.getElementById('btn-forward')
        leftBtn = document.getElementById('btn-left')
        rightBtn = document.getElementById('btn-right')
        backwardBtn = document.getElementById('btn-backward')

        window.addEventListener('keydown', (event) => {
            if(event.keyCode == 38) {
                forwardBtn.click()
            } else if (event.keyCode == 37) {
                leftBtn.click()
            } else if (event.keyCode == 39) {
                rightBtn.click()
            } else if (event.keyCode == 40) {
                backwardBtn.click()
            }
        })

        //Submitting Forms

        $("#go-forward-form").on('submit', function (e) {

            e.preventDefault();

            $.ajax({
                url: "{{ url_for('move') }}",
                type:"POST",
                data: {
                    direction: "forward",
                },

                success: function(data) {
                    console.log("success")
                }
            })
        })

        $("#go-left-form").on('submit', function (e) {

            e.preventDefault();

            $.ajax({
                url: "{{ url_for('move') }}",
                type:"POST",
                data: {
                    direction: "left",
                },

                success: function(data) {
                    console.log("success")
                }
            })
        })

        $("#go-right-form").on('submit', function (e) {

            e.preventDefault();

            $.ajax({
                url: "{{ url_for('move') }}",
                type:"POST",
                data: {
                    direction: "right",
                },

                success: function(data) {
                    console.log("success")
                }
            })
        })

        $("#go-backward-form").on('submit', function (e) {

            e.preventDefault();

            $.ajax({
                url: "{{ url_for('move') }}",
                type:"POST",
                data: {
                    direction: "backward",
                },
            })
        })
    </script>
</body>
</html>